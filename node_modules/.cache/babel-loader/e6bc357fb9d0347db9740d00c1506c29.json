{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/lenovo/letterBox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/lenovo/letterBox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/lenovo/letterBox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import'./LoginPage.css';import{IonPage,IonHeader,IonContent,IonTitle,IonButton,IonLoading}from\"@ionic/react\";import{BrowserRouter as Router,Switch,Route,Link}from\"react-router-dom\";import Tab2 from'./Tab2';import db from\"../Firestore\";import{loadPartialConfigAsync}from'@babel/core';import signIn from'./SignIn';import{AppContext}from\"../initialState\";import{alertCircleSharp}from'ionicons/icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginForm(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showLoading=_useState2[0],setShowLoading=_useState2[1];var _useContext=useContext(AppContext),state=_useContext.state,dispatch=_useContext.dispatch;var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),phoneNumber=_useState6[0],setNumber=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user,ids,user_exists,user_id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(name==\"\"||password==\"\"||phoneNumber==\"\")){_context.next=4;break;}alert(\"Please Fill in all the details\");_context.next=12;break;case 4://Show Progresss\nsetShowLoading(true);//Check the <inputsssss className=\"\"></inputsssss>\nalert(password);user_exists=true;_context.next=9;return db.collection(\"users\").doc(phoneNumber.toString()).get().then(function(doc){if(!doc.exists){alert(\"Account Doesnt Exist!, Press Sign In Button to make a new Account.\");setShowLoading(false);user_exists=false;}else{if(!(password.toString()==doc.data()['password'])){alert(\"Incorrect Password,Please Try Again.\");setShowLoading(false);}else{alert(\"Welcome\"+name.toString());user=doc.data();var action={type:\"LoginUser\",payload:user};dispatch(action);setShowLoading(false);}}});case 9:user_id=_context.sent;if(user_exists){_context.next=12;break;}return _context.abrupt(\"return\");case 12:case\"end\":return _context.stop();}}},_callee);}));return function login(){return _ref.apply(this,arguments);};}();var signIn=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var user_details;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setShowLoading(true);user_details={name:name.toString(),contact:[],password:password.toString(),phone:phoneNumber.toString()};db.collection(\"users\").doc(phoneNumber.toString()).get().then(function(doc){if(doc.exists){alert(\"Account Already Exists!, Logging In...\");if(doc.data()['password']==password.toString()){alert(\"Welcome\"+name.toString());setShowLoading(false);var action={type:\"LoginUser\",payload:user_details};dispatch(state,action);setShowLoading(false);}else{alert(\"Invalid Password!\");setShowLoading(false);}}else{db.collection(\"users\").doc(phoneNumber.toString()).set(user_details).then(function(){alert(\"Welcome!!!\");setShowLoading(false);var action={type:\"LoginUser\",payload:user_details};dispatch(action);setShowLoading(false);});}});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function signIn(){return _ref2.apply(this,arguments);};}();var login_form=/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsxs(IonTitle,{children:[\"letterBox  \",/*#__PURE__*/_jsx(\"h2\",{children:\"Log In\"})]})}),/*#__PURE__*/_jsxs(IonContent,{children:[/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"input\",{className:\"input-style\",placeholder:\"Name\",type:\"text\",onChange:function onChange(e){setName(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"input-style\",placeholder:\"Phone\",type:\"tel\",maxLength:\"10\",onChange:function onChange(e){setNumber(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"input-style\",placeholder:\"Password\",type:\"password\",onChange:function onChange(e){setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(IonButton,{onClick:function onClick(e){login();},children:\"Login\"}),/*#__PURE__*/_jsx(IonButton,{onClick:function onClick(e){signIn();},children:\"Sign In\"}),/*#__PURE__*/_jsx(IonLoading,{isOpen:showLoading,onDidDismiss:function onDidDismiss(){return setShowLoading(false);},message:'Please wait...'})]})]});return login_form;};export default LoginForm;","map":{"version":3,"sources":["C:/Users/lenovo/letterBox/src/pages/LoginPage.jsx"],"names":["React","useContext","useState","IonPage","IonHeader","IonContent","IonTitle","IonButton","IonLoading","BrowserRouter","Router","Switch","Route","Link","Tab2","db","loadPartialConfigAsync","signIn","AppContext","alertCircleSharp","LoginForm","showLoading","setShowLoading","state","dispatch","name","setName","phoneNumber","setNumber","password","setPassword","login","alert","user_exists","collection","doc","toString","get","then","exists","data","user","action","type","payload","user_id","user_details","contact","phone","set","login_form","e","target","value"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport './LoginPage.css';\r\nimport { IonPage, IonHeader, IonContent, IonTitle, IonButton, IonLoading } from \"@ionic/react\"\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link\r\n} from \"react-router-dom\";\r\nimport Tab2 from './Tab2';\r\nimport db from \"../Firestore\";\r\nimport { loadPartialConfigAsync } from '@babel/core';\r\nimport signIn from './SignIn';\r\nimport { AppContext } from \"../initialState\"\r\nimport { alertCircleSharp } from 'ionicons/icons';\r\n\r\nfunction LoginForm() {\r\n    let [showLoading, setShowLoading] = useState(false);\r\n    let { state, dispatch } = useContext(AppContext);\r\n\r\n    let [name, setName] = useState(\"\");\r\n    let [phoneNumber, setNumber] = useState(\"\");\r\n    let [password, setPassword] = useState(\"\");\r\n\r\n    const login = async () => {\r\n        if (name == \"\" || password == \"\" || phoneNumber == \"\") {\r\n            alert(\"Please Fill in all the details\");\r\n        }\r\n        else {\r\n            //Show Progresss\r\n            setShowLoading(true);\r\n            //Check the <inputsssss className=\"\"></inputsssss>\r\n            let user;\r\n            alert(password);\r\n            var ids;\r\n            let user_exists = true;\r\n            let user_id = await db.collection(\"users\").doc(phoneNumber.toString()).get().\r\n                then((doc) => {\r\n                    if (!doc.exists) {\r\n                        alert(\"Account Doesnt Exist!, Press Sign In Button to make a new Account.\");\r\n                        setShowLoading(false);\r\n                        user_exists = false;\r\n                    }\r\n\r\n                    else {\r\n                        if (!(password.toString() == doc.data()['password'])) {\r\n                            alert(\"Incorrect Password,Please Try Again.\");\r\n                            setShowLoading(false);\r\n                        }\r\n                        else {\r\n                            alert(\"Welcome\" + name.toString());\r\n                            user = doc.data();\r\n                            var action = {\r\n                                type: \"LoginUser\"\r\n                                , payload: user\r\n                            };\r\n                            dispatch(action);\r\n                            setShowLoading(false);\r\n                        }\r\n\r\n                    }\r\n\r\n\r\n                });\r\n            if (!user_exists) {\r\n\r\n\r\n                return;\r\n            }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        }\r\n\r\n    };\r\n\r\n\r\n    const signIn = async () => {\r\n        setShowLoading(true);\r\n        var user_details = {\r\n            name: name.toString(),\r\n            contact: [],\r\n            password: password.toString(),\r\n            phone: phoneNumber.toString()\r\n\r\n        };\r\n        db.collection(\"users\").doc(phoneNumber.toString()).get()\r\n            .then((doc) => {\r\n                if (doc.exists) {\r\n                    alert(\"Account Already Exists!, Logging In...\");\r\n                    if (doc.data()['password'] == password.toString()) {\r\n                        alert(\"Welcome\" + name.toString());\r\n                        setShowLoading(false);\r\n                        var action = {\r\n                            type: \"LoginUser\"\r\n                            , payload: user_details\r\n                        };\r\n                        dispatch(state, action);\r\n                        setShowLoading(false);\r\n                    }\r\n                    else {\r\n                        alert(\"Invalid Password!\");\r\n                        setShowLoading(false);\r\n\r\n                    }\r\n                }\r\n                else {\r\n\r\n\r\n                    db.collection(\"users\").doc(phoneNumber.toString()).set(\r\n                        user_details\r\n                    )\r\n                        .then(() => {\r\n                            alert(\"Welcome!!!\");\r\n                            setShowLoading(false);\r\n                            var action = {\r\n                                type: \"LoginUser\"\r\n                                , payload: user_details\r\n                            };\r\n                            dispatch(action);\r\n                            setShowLoading(false);\r\n                        });\r\n                }\r\n            })\r\n\r\n    }\r\n\r\n\r\n\r\n    var login_form = (\r\n        <IonPage>\r\n            <IonHeader><IonTitle>letterBox  <h2>Log In</h2></IonTitle></IonHeader>\r\n            <IonContent>\r\n                <form>\r\n                    <input className=\"input-style\" placeholder=\"Name\" type=\"text\" onChange={(e) => { setName(e.target.value) }}\r\n                    /><br></br>\r\n                    <input className=\"input-style\" placeholder=\"Phone\" type=\"tel\" maxLength=\"10\" onChange={(e) => { setNumber(e.target.value) }} />\r\n                    <input className=\"input-style\" placeholder=\"Password\" type=\"password\" onChange={(e) => { setPassword(e.target.value) }} />\r\n                </form>\r\n                <IonButton onClick={(e) => { login() }}>Login</IonButton>\r\n                <IonButton onClick={(e) => { signIn() }}>Sign In</IonButton>\r\n                <IonLoading\r\n\r\n                    isOpen={showLoading}\r\n                    onDidDismiss={() => setShowLoading(false)}\r\n                    message={'Please wait...'}\r\n\r\n                />\r\n\r\n\r\n            </IonContent>\r\n        </IonPage>\r\n    );\r\n    return login_form;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default LoginForm;\r\n"]},"metadata":{},"sourceType":"module"}